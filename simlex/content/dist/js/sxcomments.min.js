var SxComments=function(){function e(e,n,t,o){this._comments=$(e),this._form=this._comments.find(".sx-new-comment"),this._postUrl=n,this._target=$(t),this._beforeSend=o}return e.prototype.initialize=function(){var e=this;this._comments.on("click",".comment__reply > a",function(n){n.preventDefault();var t=$(n.currentTarget),o=t.closest(".sx-comment"),m=o.find(".sx-new-comment").length>0;if(!m){var c=e._form.clone();c.hide().appendTo(o).fadeIn(.1,function(){var n=o.attr("id").replace("sx-comment-","");$('<input type="hidden" name="CommentId" value="'+n+'" />').appendTo(c.find("form")),e._comments.find(".sx-comment").not('[id="sx-comment-'+n+'"]').find(".sx-new-comment").remove(),o.find(".sx-comments__cancel-reply").show(),e._form.hide()})}}),this._comments.on("click",".sx-comments__cancel-reply",function(n){n.preventDefault(),e._comments.find(".sx-comment .sx-new-comment").remove(),e._form.show()}),this._comments.on("submit",".sx-new-comment form",function(n){n.preventDefault();var t=$(n.currentTarget);$.ajax({method:"post",url:e._postUrl,data:t.serialize(),beforeSend:function(){e._beforeSend&&e._beforeSend(t)},success:function(n,t,o){e._target.html(n)}})})},e}();