window.onload=function(t){new MontyHall};var MontyHall=function(){function t(){var t=this;this.createBlock=function(){t._mhBlock.html(""),$("<h4>Парадокс Манти Холла</h4>").addClass("monty-hall__header").appendTo(t._mhBlock),t._table=$("<table></table>").addClass("table table-condensed table-bordered monty-hall__table").appendTo(t._mhBlock);$('<tr><td>Попыток</td><td id="monty-hall-count"></td></tr>').appendTo(t._table),$('<tr><td>Неправильных ответов</td><td id="monty-hall-false-count"></td></tr>').appendTo(t._table),$('<tr><td>Правильных ответов</td><td id="monty-hall-true-count"></td></tr>').appendTo(t._table),$('<tr><td>Процент</td><td id="monty-hall-percent"></td></tr>').appendTo(t._table);t._result=new MontyHallResult,t.fillResult(),t.createStep()},this.createStep=function(){t._stepRow&&t._stepRow.remove(),t._stepRow=$("<div></div>").addClass("row").appendTo(t._mhBlock);var e=$('<div><a href="#"><img alt="Монти Холл. Закрытая дверь" src="/content/dist/i/static/monty-hall/door.jpg"/></a></div>').addClass("monty-hall__door"),a=(e.clone().attr("data-door","1").addClass("col-md-4 col-sm-4 col-xs-4").appendTo(t._stepRow),e.clone().attr("data-door","2").addClass("col-md-4 col-sm-4 col-xs-4").appendTo(t._stepRow),e.clone().attr("data-door","3").addClass("col-md-4 col-sm-4 col-xs-4").appendTo(t._stepRow),t.getRandomArbitrary(1,3));$('[data-door="'+a+'"]').attr("data-prize","true")},this.getRandomArbitrary=function(t,e){return Math.floor(Math.random()*(e+1-t)+t)},this.openFalseDoor=function(){var e=!1;$.each(t._mhBlock.find(".monty-hall__door"),function(t,a){var o=$(a),l=("true"===o.attr("data-opened"),"true"===o.attr("data-selected")),n="true"===o.attr("data-prize");e||l||n||(o.attr("data-opened","true"),o.find("img").attr("src","/content/dist/i/static/monty-hall/door-empty.jpg"),e=!0)})},this._mhBlock=$("#monty-hall"),this.createBlock(),this._mhBlock.on("click","a",function(e){var a=$(e.currentTarget),o=a.parent(".monty-hall__door");e.preventDefault();var l="true"===o.attr("data-opened"),n=("true"===o.attr("data-selected"),"true"===o.attr("data-prize"));if(!l){var r=1===t._mhBlock.find('[data-selected="true"]').length;r?(t._result.Count++,n?t._result.TrueCount++:t._result.FalseCount++,t.fillResult(),t.createStep()):(o.attr("data-selected","true"),t.openFalseDoor())}})}return t.prototype.fillResult=function(){this._table.find("td#monty-hall-count").html(this._result.Count.toString()),this._table.find("td#monty-hall-true-count").html(this._result.TrueCount.toString()),this._table.find("td#monty-hall-false-count").html(this._result.FalseCount.toString()),this._table.find("td#monty-hall-percent").html(this._result.Percent().toString())},t}(),MontyHallResult=function(){function t(){var t=this;this.Count=0,this.TrueCount=0,this.FalseCount=0,this.Percent=function(){return 0===t.Count||0===t.TrueCount?0:Math.round(100*t.TrueCount/t.Count)}}return t}();