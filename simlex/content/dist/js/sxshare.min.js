window.onload=function(t){new SxShare(".sxshare",(!0))};var SxShare=function(){function t(t,e){var n=this;void 0===e&&(e=!1),this._counters=new Array,this._array=$(t),this._showCounters=e,0!==this._array.length&&($.each(this._array,function(t,e){var o=$(e),r=o.attr("data-net-code"),i="true"===o.attr("data-show-counter"),s=o.attr("data-url"),a=o.attr("data-image"),c=o.attr("data-title"),u=o.attr("data-desc"),h=new SxShareItem(r,s,a,c,u);o.on("click",function(t){t.preventDefault(),n.openWondow(h)});var d=$.grep(n._counters,function(t){return t.Url===s&&t.NetCode===r}).length>0;d||i&&n._counters.push(new SxShareCounter(r,s))}),this._showCounters&&this.showCounters())}return t.prototype.openWondow=function(t){t.popup()},t.prototype.showCounters=function(){$.each(this._counters,function(t,e){e.getCount()})},t}(),SxShareItem=function(){function t(t,e,n,o,r){var i=this;this.getWindowUrl=function(){switch(i.NetCode){default:return"";case"vk":return"http://vk.com/share.php?url="+encodeURIComponent(i.Url)+"&title="+encodeURIComponent(i.Title)+"&description="+encodeURIComponent(i.Description)+"&image="+encodeURIComponent(i.Image);case"ok":return"http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st.comments="+encodeURIComponent(i.Title)+"&st._surl="+encodeURIComponent(i.Url)}},this.popup=function(){window.open(i.getWindowUrl(),"","left="+(screen.width-630)/2+",top="+(screen.height-440)/2+",toolbar=0,status=0,scrollbars=0,menubar=0,location=0,width=630,height=440")},this.NetCode=t,this.Url=e,this.Image=n,this.Title=o,this.Description=r}return t}(),SxShareCounter=function(){function t(t,e){var n=this;this.getCount=function(){var t=n,e=window;switch(n.NetCode){case"vk":$.getJSON("https://vk.com/share.php?act=count&index=1&url="+encodeURIComponent(n.Url)+"&callback=?",function(t){}),e.VK||(e.VK={}),e.VK.Share={count:function(e,n){t.setCount(n)}};break;case"ok":$.getJSON("https://connect.ok.ru/dk?st.cmd=extLike&uid=1&ref="+encodeURIComponent(n.Url)+"&callback=?",function(t){}),e.ODKL||(e.ODKL={}),e.ODKL.updateCount=function(e,n){t.setCount(n)}}},this.setCount=function(t){$('.share-buttons [data-url="'+n.Url+'"] .sxshare__counter').html(t.toString())},this.NetCode=t,this.Url=e}return t}();